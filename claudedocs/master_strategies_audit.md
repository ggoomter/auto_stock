# ëŒ€ê°€ ì „ëµ ì•Œê³ ë¦¬ì¦˜ ê¸ˆìœµ ì „ë¬¸ê°€ ê²€ì¦

## ğŸš¨ ì‹¬ê°í•œ ë¬¸ì œì  ë°œê²¬

### 1. ì›Œë Œ ë²„í• ì „ëµ - ë…¼ë¦¬ì  ì˜¤ë¥˜
**í˜„ì¬ ì½”ë“œ:**
```python
# ì§„ì…: í€ë”ë©˜í„¸ OK + ê¸°ìˆ ì  ì¡°ê±´
if price_below_ma.loc[date]:
    if 'RSI' in price_data.columns:
        entry_signals.loc[date] = oversold.loc[date]  # RSI < 40
```

**âŒ ë¬¸ì œ:**
- ë²„í•ì€ "ê°€ê²© í•˜ë½ = ë§¤ìˆ˜ ê¸°íšŒ"ê°€ ì•„ë‹˜
- RSI < 40 (ê³¼ë§¤ë„)ë¥¼ ê¸°ë‹¤ë¦¬ë©´ ì´ë¯¸ ë°˜ë“± ë†“ì¹¨
- **ë²„í• ì›ì¹™**: "í›Œë¥­í•œ ê¸°ì—…ì„ ì ì •ê°€ì—" â‰  "ê¸°ìˆ ì  ë°”ë‹¥"

**âœ… ì˜¬ë°”ë¥¸ ë¡œì§:**
```python
# ë²„í•ì€ í€ë”ë©˜í„¸ë§Œ ì²´í¬, ê¸°ìˆ ì  ë¶„ì„ ë¶ˆí•„ìš”
# ì¡°ê±´ ì¶©ì¡± ì‹œ ì¦‰ì‹œ ë§¤ìˆ˜, ì¡°ê±´ ì´íƒˆ ì‹œ ì²­ì‚°
if passes_fundamental:
    entry_signals.loc[date] = True
# ì²­ì‚°: í€ë”ë©˜í„¸ ì•…í™”ë§Œ
if not passes_fundamental:
    exit_signals.loc[date] = True
```

---

### 2. í”¼í„° ë¦°ì¹˜ ì „ëµ - ì™„ì „íˆ ì˜ëª»ëœ íƒ€ì´ë°
**í˜„ì¬ ì½”ë“œ:**
```python
near_high = close > rolling_high * 0.95  # 52ì£¼ ê³ ì  ê·¼ì²˜
entry_signals = near_high & volume_surge  # ê³ ì ì—ì„œ ë§¤ìˆ˜???
exit_signals = price_below_ma50  # MA50 ì•„ë˜ë©´ ì²­ì‚°
```

**âŒ ì¹˜ëª…ì  ì˜¤ë¥˜:**
- **52ì£¼ ê³ ì  ê·¼ì²˜ì—ì„œ ë§¤ìˆ˜** = ìµœì•…ì˜ íƒ€ì´ë°
- ë¦°ì¹˜ëŠ” "ì €í‰ê°€ëœ ì„±ì¥ì£¼" ì°¾ëŠ” ê²ƒ
- PEG < 1.0 í™•ì¸í–ˆìœ¼ë©´ **ì§€ê¸ˆ ë°”ë¡œ ë§¤ìˆ˜**, ê³ ì  ê¸°ë‹¤ë¦¬ë©´ ì•ˆë¨

**âœ… ì˜¬ë°”ë¥¸ ë¡œì§:**
```python
# ë¦°ì¹˜: PEG < 1.0 + ì„±ì¥ë¥  > 20% í™•ì¸ë˜ë©´ ì¦‰ì‹œ ë§¤ìˆ˜
if passes_fundamental:  # PEG < 1.0, ì„±ì¥ë¥  > 20%
    # ì¶”ê°€ ì¡°ê±´: ìƒìŠ¹ ì¶”ì„¸ ì‹œì‘ (MA20 > MA50)
    if ma20 > ma50:
        entry_signals.loc[date] = True

# ì²­ì‚°: ì„±ì¥ ë‘”í™” ë˜ëŠ” ê³¼ëŒ€í‰ê°€
if not passes_fundamental:  # PEG > 2.0 ë˜ëŠ” ì„±ì¥ë¥  < 10%
    exit_signals.loc[date] = True
```

---

### 3. ë²¤ì €ë¯¼ ê·¸ë ˆì´ì—„ - ì²­ì‚° ë¡œì§ ë²„ê·¸
**í˜„ì¬ ì½”ë“œ:**
```python
# ì§„ì…ê°€ ì¶”ì 
entry_price = close.where(entry_signals).ffill()  # âŒ ë²„ê·¸!
profit_target = entry_price * 1.20
exit_signals = close > profit_target
```

**âŒ ë¬¸ì œ:**
1. `ffill()`ë¡œ ì¸í•´ **ì²­ì‚° í›„ì—ë„ ì´ì „ ì§„ì…ê°€ ìœ ì§€**
2. ì˜ˆ: 2024-01-01 ë§¤ìˆ˜(100ì›) â†’ 2024-03-01 ì²­ì‚°(120ì›) â†’ 2024-06-01 ë‹¤ì‹œ ë§¤ìˆ˜(130ì›)
   - ì´ ë•Œ `entry_price = 100ì›` (ì˜ëª»ë¨!)
   - 130ì›ì— ë§¤ìˆ˜í–ˆëŠ”ë° 120ì› ëª©í‘œë¡œ ë°”ë¡œ ì²­ì‚°ë¨

**âœ… ì˜¬ë°”ë¥¸ ë¡œì§:**
```python
# í¬ì§€ì…˜ë³„ ì§„ì…ê°€ ì¶”ì  í•„ìš”
# ë°±í…ŒìŠ¤íŠ¸ ì—”ì§„ì—ì„œ ì²˜ë¦¬í•˜ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ë‹¨ìˆœí™”
exit_signals = pd.Series([False] * len(price_data), index=price_data.index)
# ìµì ˆ ëª©í‘œëŠ” risk_paramsì—ì„œ ì²˜ë¦¬ (take_pct=0.30)
```

---

### 4. ë‹¬ë¦¬ì˜¤ ì˜¬ì›¨ë” - ë‹¨ì¼ ì¢…ëª©ì— ì ìš© ë¶ˆê°€
**í˜„ì¬ ì½”ë“œ:**
```python
# ì˜¬ì›¨ë”ëŠ” Buy & Hold ì „ëµ
entry_signals.iloc[0] = True  # ì²«ë‚  ë§¤ìˆ˜
# ë¶„ê¸°ë§ˆë‹¤ ë¦¬ë°¸ëŸ°ì‹±
for i in range(63, len(price_data), 63):
    exit_signals.iloc[i] = True
```

**âŒ ê·¼ë³¸ì  ë¬¸ì œ:**
- ì˜¬ì›¨ë” = **í¬íŠ¸í´ë¦¬ì˜¤ ì „ëµ** (ì£¼ì‹ 30% + ì±„ê¶Œ 40% + ê¸ˆ 15% + ì›ìì¬ 15%)
- ë‹¨ì¼ ì¢…ëª©ì— ì ìš© ì˜ë¯¸ ì—†ìŒ
- ë¦¬ë°¸ëŸ°ì‹± = ë§¤ë„ê°€ ì•„ë‹ˆë¼ **ë¹„ì¤‘ ì¡°ì •**

**âœ… ì˜¬ë°”ë¥¸ ì ‘ê·¼:**
```python
# ë°©ë²• 1: ì•„ì˜ˆ ì œê±° (ë‹¨ì¼ ì¢…ëª© ë°±í…ŒìŠ¤íŠ¸ ë¶ˆê°€)
# ë°©ë²• 2: "Trend Following + Buy & Hold" ë³€í˜•
entry_signals.iloc[0] = True  # ì²«ë‚  ë§¤ìˆ˜
exit_signals = pd.Series([False] * len(price_data))  # ì ˆëŒ€ ì²­ì‚° ì•ˆí•¨
# stop_pct=0.50, take_pct=1.00 ìœ ì§€
```

---

### 5. ì œì‹œ ë¦¬ë²„ëª¨ì–´ - âœ… ì´ë¯¸ ìˆ˜ì •ë¨
- 52ì£¼ ì‹ ê³ ê°€ ëŒíŒŒ âœ…
- ì¶”ì„¸ í™•ì¸ (MA50) âœ…
- ê±°ë˜ëŸ‰ ì¦ê°€ âœ…
- MA50 í•˜í–¥ ëŒíŒŒ ì²­ì‚° âœ…

---

### 6. ìœŒë¦¬ì—„ ì˜¤ë‹ (CAN SLIM) - ì˜ëª»ëœ ì²­ì‚°
**í˜„ì¬ ì½”ë“œ:**
```python
near_high = close > rolling_high * 0.98  # ì‹ ê³ ê°€ ê·¼ì²˜
entry_signals = near_high & above_ma50 & volume_surge

below_ma21 = close < ma21
exit_signals.loc[date] = below_ma21  # MA21 ì•„ë˜ë©´ ì²­ì‚°
```

**âŒ ë¬¸ì œ:**
- ì˜¤ë‹ì˜ í•µì‹¬ ì›ì¹™: **7-8% ì†ì ˆ**
- MA21 ì•„ë˜ = ë„ˆë¬´ ëŠ¦ì€ ì²­ì‚° (ì´ë¯¸ 15-20% ì†ì‹¤ ê°€ëŠ¥)

**âœ… ì˜¬ë°”ë¥¸ ë¡œì§:**
```python
# ì§„ì…ì€ OK (ì‹ ê³ ê°€ ëŒíŒŒ + ê±°ë˜ëŸ‰)
entry_signals = near_high & above_ma50 & volume_surge

# ì²­ì‚°: ê³ ì  ëŒ€ë¹„ 7-8% í•˜ë½ (íƒ€ì´íŠ¸ ì†ì ˆ)
# â†’ ì´ê±´ ë°±í…ŒìŠ¤íŠ¸ ì—”ì§„ì˜ stop_pct=0.08ë¡œ ì²˜ë¦¬ë¨
# ì¶”ê°€ ì²­ì‚°: ì¶”ì„¸ ì´íƒˆ (MA21 í•˜í–¥ ëŒíŒŒ)
price_prev = close.shift(1)
ma21_prev = ma21.shift(1)
trend_broken = (price_prev >= ma21_prev) & (close < ma21)
exit_signals = trend_broken
```

---

## ğŸ“Š ì „ëµë³„ ìš”ì•½

| ì „ëµ | í˜„ì¬ ìƒíƒœ | ì‹¬ê°ë„ | ìˆ˜ì • í•„ìš” |
|------|----------|--------|----------|
| ì›Œë Œ ë²„í• | RSI ê³¼ë§¤ë„ ê¸°ë‹¤ë¦¼ | ğŸ”´ ë†’ìŒ | ê¸°ìˆ ì  ë¶„ì„ ì œê±°, í€ë”ë©˜í„¸ë§Œ |
| í”¼í„° ë¦°ì¹˜ | ê³ ì ì—ì„œ ë§¤ìˆ˜ | ğŸ”´ ë§¤ìš° ë†’ìŒ | PEG í™•ì¸ ì‹œ ì¦‰ì‹œ ë§¤ìˆ˜ |
| ë²¤ì €ë¯¼ ê·¸ë ˆì´ì—„ | ì§„ì…ê°€ ì¶”ì  ë²„ê·¸ | ğŸŸ¡ ì¤‘ê°„ | ffill() ì œê±° |
| ë ˆì´ ë‹¬ë¦¬ì˜¤ | ë‹¨ì¼ ì¢…ëª© ë¶€ì í•© | ğŸ”´ ë†’ìŒ | Buy&Holdë¡œ ë‹¨ìˆœí™” |
| ì œì‹œ ë¦¬ë²„ëª¨ì–´ | âœ… ì •ìƒ | ğŸŸ¢ ì •ìƒ | ìˆ˜ì • ì™„ë£Œ |
| ìœŒë¦¬ì—„ ì˜¤ë‹ | ì²­ì‚° íƒ€ì´ë° ëŠ¦ìŒ | ğŸŸ¡ ì¤‘ê°„ | MA21 í¬ë¡œìŠ¤ë‹¤ìš´ìœ¼ë¡œ ìˆ˜ì • |

---

## ğŸ¯ ê¶Œì¥ ìˆ˜ì •ì‚¬í•­

### ìš°ì„ ìˆœìœ„ 1 (ì¦‰ì‹œ ìˆ˜ì •)
1. **í”¼í„° ë¦°ì¹˜**: 52ì£¼ ê³ ì  ë§¤ìˆ˜ â†’ PEG í™•ì¸ ì¦‰ì‹œ ë§¤ìˆ˜
2. **ì›Œë Œ ë²„í•**: RSI ì¡°ê±´ ì œê±° â†’ í€ë”ë©˜í„¸ë§Œ

### ìš°ì„ ìˆœìœ„ 2 (ì¤‘ìš”)
3. **ë²¤ì €ë¯¼ ê·¸ë ˆì´ì—„**: ffill() ë²„ê·¸ ìˆ˜ì •
4. **ë ˆì´ ë‹¬ë¦¬ì˜¤**: ë‹¨ì¼ ì¢…ëª© ì „ëµìœ¼ë¡œ ì¬ì„¤ê³„

### ìš°ì„ ìˆœìœ„ 3 (ê°œì„ )
5. **ìœŒë¦¬ì—„ ì˜¤ë‹**: ì²­ì‚° ë¡œì§ ê°œì„ 

---

## ğŸ’¡ ê¸ˆìœµ ì „ë¬¸ê°€ ì˜ê²¬

**ë¬¸ì œì˜ í•µì‹¬:**
- ê° ëŒ€ê°€ì˜ **ì² í•™**ì„ ê¸°ìˆ ì  ì§€í‘œë¡œ ì˜ëª» í•´ì„
- ë²„í•/ë¦°ì¹˜ëŠ” **í€ë”ë©˜í„¸ íˆ¬ìì** â†’ ê¸°ìˆ ì  ë¶„ì„ ìµœì†Œí™”
- ë¦¬ë²„ëª¨ì–´/ì˜¤ë‹ì€ **ëª¨ë©˜í…€ íˆ¬ìì** â†’ ê¸°ìˆ ì  ë¶„ì„ ì¤‘ì‹¬

**ì˜¬ë°”ë¥¸ ì ‘ê·¼:**
1. **í€ë”ë©˜í„¸ ì „ëµ** (ë²„í•, ë¦°ì¹˜, ê·¸ë ˆì´ì—„)
   - ì¡°ê±´ ì¶©ì¡± ì‹œ ì¦‰ì‹œ ë§¤ìˆ˜
   - ì¡°ê±´ ì´íƒˆ ì‹œ ì²­ì‚°
   - ê¸°ìˆ ì  ë¶„ì„ì€ ë³´ì¡° ìˆ˜ë‹¨

2. **ê¸°ìˆ ì /ëª¨ë©˜í…€ ì „ëµ** (ë¦¬ë²„ëª¨ì–´, ì˜¤ë‹)
   - ê°€ê²© íŒ¨í„´ + ê±°ë˜ëŸ‰ ì¤‘ì‹¬
   - íƒ€ì´íŠ¸í•œ ì†ì ˆ

3. **í¬íŠ¸í´ë¦¬ì˜¤ ì „ëµ** (ë‹¬ë¦¬ì˜¤)
   - ë‹¨ì¼ ì¢…ëª© ë°±í…ŒìŠ¤íŠ¸ ë¶€ì í•©
   - Buy&Holdë¡œ ë‹¨ìˆœí™” ë˜ëŠ” ì œê±°
